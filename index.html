<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>코브코드 변환기</title>
</head>
<body>
    <textarea id="input"></textarea>
    <button id="convert">변환</button>
    <pre id="output"></pre>
</body>

<script src="https://unpkg.com/hangul-js"></script>
<script>
const triMap = {
  'ㄱ': '.',
  'ㄴ': '.,',
  'ㄷ': '.,,',
  'ㄹ': '..,',
  'ㅁ': ".,,,",
  'ㅂ':"..,,",
  'ㅅ':"..,.",
  'ㅇ':".,.,",
  'ㅈ':",",
  'ㅊ':",..,",
  'ㅋ':",.,",
  "ㅌ":",,",
  "ㅍ":",.,,",
  "ㅎ":",,.,",
  "ㅏ":"/",
  "ㅑ":"//\\",          // <-- \ → \\
  "ㅓ":"/_",
  "ㅕ":"/\\/\\",       // <-- \ → \\
  "ㅗ":"/\\",          // <-- \ → \\
  "ㅛ":"/\\_",         // <-- \ → \\
  "ㅜ":"/_",
  "ㅠ":"/_/",
  "ㅡ":"/__",
  "ㅣ":"\\/",          // <-- \ → \\
  "ㅔ":"\\/_",         // <-- \ → \\
  "ㅖ":"\\/\\",        // <-- \ → \\
  "ㅐ":"\\_/",         // <-- \ → \\
  "ㅒ":"\\_",          // <-- \ → \\
  "ㅘ":"\\_\\",        // <-- \ → \\
  "ㅙ":"\\\\/",        // <-- 두 개의 \ → \\\\
  "ㅚ":"\\\\_",        // <-- 두 개의 \ → \\\\
  "ㅝ":"\\",           // <-- \ → \\
  "ㅞ":"_/",
  "ㅟ":"_/_",
  "ㅢ":"_/\\",         // <-- \ → \\
  "ㄵ":":",
  "ㄶ":";",
  "ㄺ":":;",
  "ㄻ":";:",
  "ㄼ":";;",
  "ㄽ":"::",
  "ㄾ":";:;",
  "ㄿ":":;;",
  "ㅀ":"::;",
  "ㅄ":";;;"
};

document.getElementById('convert').onclick = () => {
  const text = document.getElementById('input').value;
  const decomposed = Hangul.disassemble(text); // 자모 분리
  const result = decomposed.map(ch => triMap[ch] || ch).join(' ');
  document.getElementById('output').textContent = toTriCode(text);
};

function toTriCode(text) {
  return text.split('').map(ch => {
    // 1) 한 글자를 자모 배열로 분해
    const jamo = Hangul.disassemble(ch);
    
    // 2) 각 자모를 TriCode로 변환하고 붙이기
    return jamo.map(j => triMap[j] || j).join('');
    
  }).join(' ');  // 글자 사이에는 공백
}

</script>
</html>